<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>CrashRpt: Obsolete Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="style.css" rel="stylesheet" type="text/css">
<link rel="icon" href="../favicon.ico" type="image/x-icon" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>

<div style="padding:10px">
<table border="0" bgcolor="#FFFFFF" cellspacing="5" width="100%">
 <tr>
  <td width="24px" rowspan="2"><img src="../logo.png" alt="Logo" /></td>
  <td><font family="Arial" size="+2">crashrpt</font></td>
  <td rowspan="2" align="right"></td>
 </tr>
 <tr>
  <td colspan="2"><span style="font-size:0.9em"><i>A crash reporting system for Windows applications</i></a></td>
 </tr>
</table>
</div>


<!-- Generated by Doxygen 1.5.9 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Contents</span></a></li>
      <li><a href="modules.html"><span>API&nbsp;Reference</span></a></li>
      <li><a href="files.html"><span>File&nbsp;Reference</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Obsolete Functions</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef BOOL(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___deprecated_a_p_i.html#ga5587485696de27611c497382de06ce3">LPGETLOGFILE</a> )(LPVOID lpvState)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Client crash callback function prototype.  <a href="#ga5587485696de27611c497382de06ce3"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___deprecated_a_p_i.html#g7a2a09a4be002f99d1f224e5a5baae82">crAddScreenshot</a> (DWORD dwFlags)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adds a screenshot to the crash report.  <a href="#g7a2a09a4be002f99d1f224e5a5baae82"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="ga5587485696de27611c497382de06ce3"></a><!-- doxytag: member="CrashRpt.h::LPGETLOGFILE" ref="ga5587485696de27611c497382de06ce3" args=")(LPVOID lpvState)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef BOOL( * <a class="el" href="group___deprecated_a_p_i.html#ga5587485696de27611c497382de06ce3">LPGETLOGFILE</a>)(LPVOID lpvState)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Client crash callback function prototype. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lpvState</em>&nbsp;</td><td>Must be set to NULL.</td></tr>
  </table>
</dl>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd></dd></dl>
This function is deprecated, it is recommended to use <a class="el" href="group___crash_rpt_structs.html#g9b24a2fe5f56404484b6fd83b23b969b">PFNCRASHCALLBACK()</a> instead.<p>
The crash callback function is called when crash occurs. This way client application is notified about the crash.<p>
It is generally unsafe to do complex actions (e.g. memory allocation, heap operations) inside of this callback. The application state may be unstable.<p>
One reason the application may use this callback for is to close handles to open log files that the application plans to include into the error report. Files should be accessible for reading, otherwise CrashRpt won't be able to include them into error report.<p>
It is also possible (but not recommended) to add files, properties, desktop screenshots, registry keys inside of the crash callback function.<p>
The crash callback function should typically return <code>TRUE</code> to allow generate error report. Returning <code>FALSE</code> will prevent crash report generation.<p>
The following example shows how to use the crash callback function.<p>
<div class="fragment"><pre class="fragment">  <span class="comment">// define the crash callback</span>
  BOOL CALLBACK CrashCallback(LPVOID lpvState)
  {    
     <span class="comment">// Do something...</span>

     <span class="keywordflow">return</span> TRUE;
  }
</pre></div><p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group___crash_rpt_a_p_i.html#g382c00cf76818ba1a66eb89715a030ea" title="Character set-independent mapping of crAddFile2W() and crAddFile2A() functions.">crAddFile2()</a>, <a class="el" href="group___crash_rpt_structs.html#g9b24a2fe5f56404484b6fd83b23b969b" title="Character set-independent mapping of PFNCRASHCALLBACKW() and PFNCRASHCALLBACKA()...">PFNCRASHCALLBACK()</a> </dd></dl>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g7a2a09a4be002f99d1f224e5a5baae82"></a><!-- doxytag: member="CrashRpt.h::crAddScreenshot" ref="g7a2a09a4be002f99d1f224e5a5baae82" args="(DWORD dwFlags)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int crAddScreenshot           </td>
          <td>(</td>
          <td class="paramtype">DWORD&nbsp;</td>
          <td class="paramname"> <em>dwFlags</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adds a screenshot to the crash report. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>This function returns zero if succeeded. Use <a class="el" href="group___crash_rpt_a_p_i.html#g062f47d5f7284d72793c60699c7caa33" title="Defines character set-independent mapping for crGetLastErrorMsgW() and crGetLastErrorMsgA()...">crGetLastErrorMsg()</a> to retrieve the error message on fail.</dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>dwFlags</em>&nbsp;</td><td>Flags, optional.</td></tr>
  </table>
</dl>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd></dd></dl>
As of v.1.3.1, this function is deprecated and may be removed in one of the next releases. Use <a class="el" href="group___crash_rpt_a_p_i.html#g255c2086d4b4b22ebec30428a067419c">crAddScreenshot2()</a> function instead.<p>
This function can be used to take a screenshot at the moment of crash and add it to the error report. Screenshot information may help the developer to better understand the state of the application at the moment of crash and reproduce the error.<p>
When this function is called, screenshot flags are saved, then the function returns control to the caller. When crash occurs, screenshot is made by the <b>CrashSender.exe</b> process and added to the report.<p>
<b>dwFlags</b> <p>
<ul>
<li><a class="el" href="_crash_rpt_8h.html#db5559653d83fddcb95373a4e88df34e">CR_AS_ALLOW_DELETE</a> If this flag is specified, the user will be able to delete the file from error report using context menu of Error Report Details dialog.</li></ul>
<p>
Use one of the following constants to specify what part of virtual screen to capture:<ul>
<li><a class="el" href="_crash_rpt_8h.html#5d0f686c9cbb88bdc7425ab3b8bf7d1a">CR_AS_VIRTUAL_SCREEN</a> Use this to take a screenshot of the whole desktop (virtual screen).</li><li><a class="el" href="_crash_rpt_8h.html#b93f74b002581555dc2011e934d79077">CR_AS_MAIN_WINDOW</a> Use this to take a screenshot of the application's main window.</li><li><a class="el" href="_crash_rpt_8h.html#abfcf8b70b29d12bbd6b67654227de19">CR_AS_PROCESS_WINDOWS</a> Use this to take a screenshot of all visible windows that belong to the process.</li></ul>
<p>
The main application window is a window that has a caption (<b>WS_CAPTION</b>), system menu (<b>WS_SYSMENU</b>) and the <b>WS_EX_APPWINDOW</b> extended style. If CrashRpt doesn't find such window, it considers the first found process window as the main window.<p>
Screenshots are added in form of PNG files by default. You can specify the <a class="el" href="_crash_rpt_8h.html#166b110421e56bfad02f0b727a652815">CR_AS_USE_JPEG_FORMAT</a> flag to save screenshots as JPEG files instead.<p>
In addition, you can specify the <a class="el" href="_crash_rpt_8h.html#9bbc5d1376e55b96903e53de6f0e3d71">CR_AS_GRAYSCALE_IMAGE</a> flag to make a grayscale screenshot (by default color image is made). Grayscale image gives smaller file size.<p>
If you use JPEG image format, you may better use the <a class="el" href="group___crash_rpt_a_p_i.html#g255c2086d4b4b22ebec30428a067419c">crAddScreenshot2()</a> function, that allows to define JPEG image quality.<p>
When capturing entire desktop consisting of several monitors, one screenshot file is added per each monitor.<p>
You should be careful when using this feature, because screenshots may contain user-identifying or private information. Always specify purposes you will use collected information for in your Privacy Policy.<p>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group___crash_rpt_a_p_i.html#g382c00cf76818ba1a66eb89715a030ea" title="Character set-independent mapping of crAddFile2W() and crAddFile2A() functions.">crAddFile2()</a> </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>
Generated on Mon Apr 8 15:41:10 2013 for CrashRpt by&nbsp;<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9</small></address>
</body>
</html>
